{{ define "content" }}
<form action="/contacts" method="get" class="tool-bar">
    <label for="search">Search Term</label>
    <input id="search" type="search" name="q" 
        value="{{or .search ""}}"
        hx-get="/contacts"
        hx-trigger="search, keyup delay:200ms changed"
        hx-target="tbody"
        hx-push-url="true"
        hx-indicator="#spinner"/>
    <img style="20 px" id="spinner" class="htmx-indicator"
    src="/static/img/spinning-circles.svg"
    alt="Request In Flight..."/>
    <input type="submit" value="Search"/> 
    <table>
        <thead>
            <tr>
                <th>First <th>Last <th>Phone <th> Email</th>
            </tr>
        </thead>
        <tbody>
            {{ template "rows.html" . }}
            {{ if eq (len .contacts) 10 }}
            <tr>
                <td colspan="5" style="text-align: center">
                    <button hx-target="closest tr"
                        hx-swap="outerHTML"
                        hx-select="tbody > tr"
                        hx-get="/contacts?page={{ add .page 1 }}">
                        Load More
                    </button>
                </td>
            </tr>
            {{ end }}
        </tbody>
    </table>
    <button 
        hx-delete="/contacts"
        hx-confirm="Are you sure you want to delete these contacts?"
        hx-target="body">
        Delete Selected Contacts
    </button>
</form>
<p>
    <a href="/contacts/new">Add Contact</a> 
    <span hx-get="/contacts/count" hx-trigger="revealed">
        <img id="spinner" class="htmx-indicator"
            src="/static/img/spinning-circles.svg"/>
    </span>
</p>
{{ end }}
